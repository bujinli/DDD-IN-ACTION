# Event Storming 事件风暴

## 元素

|名称               |颜色   | Comments | 
|-------------------|------| ------------------------- |
|事件 - Event       | 橙色  | 名词 + 动词 (被动语态)     |
|用户角色 - User/Actor  | 深黄色  | |
|命令 - Command     | 蓝色  ||
|阻塞的问题 - | 紫色 ||
|外部系统 - External System  | 粉色 ||
|读模型 - Read/Query Model | 蓝色 ||
|策略 - Policy | 淡紫色 | 包括业务规则校验|
|大片黄色 - 





## 业务流程-事件风暴
* 领域专家阐述业务流程
* 贴出 **橙色事件** （领域事件）
    * 这里由参加会议的人，贴出，描述
    * 遇到问题，阻塞，用 **紫色问题** 记录，与领域事件相关联，也是后面优化的重点
* 针对核心的 事件 ，开始探索其运行机制和上下文
    * 引入 **蓝色命令** （Command）和 **黄色用户角色**
    ![](./images/ES-Cmd_Event.PNG)
    * 这里，就需要考虑是什么能够让**用户**做出决定/动作? 这里，我们就需要引入 **绿色读模型** 。可以由**读模型**得到UI。
        * 提问：什么用户会做出决定？为什么做出这个决定？
        * 提问：能让用户更容易的做出决定？
        * 提问: 能帮助用户做出更好的决定？
        * 提问：用户决定的依据是什么？    
    这些问题将帮助我们思考与用户做决定相关的数据模型.  此外，不同类型用户，做出决定的背后动机是不同的。根据这个能够细分不同用户角色。
    ![](./images/ES-ReadModel.PNG)
    * 随着讨论加深，整个业务逐渐清晰。
    * 当出现“当...发生时...”/“whenever X happens, we do Y”语句描述的时候，可以把这种行为逻辑称为**淡紫色策略**。**策略**一般会在**命令**与**事件**之间，可以是自动或者手动的逻辑过程。他可以是业务规则（eventual business constraint or rule or a lie detector）。策略越早捕获对系统越有利。
    ![](./images/ES-Policy.PNG)
    * 最后把一组同一概念的**命令**和**事件**，归纳合并组合，进行大归类,使用大**黄色**。  
    
    
![](./images/ES-1.PNG)


![](./images/Process-ES-overall.PNG)

##  软件设计-事件风暴
基于业务的事件风暴结果，最后进行归类的，我可以称之为聚合，
![](./images/Design-ES-overall.PNG)


## Reference
* [事件风暴建模101](https://www.jianshu.com/p/8a7814f3e9ac)   
* [DDD 实践手册 (番外篇: 事件风暴 - 实践)](https://xie.infoq.cn/article/e36e68f9c6516fa10cf546f32)